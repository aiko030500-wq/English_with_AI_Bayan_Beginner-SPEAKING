<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ENGLISH WITH AI BAYAN ‚Äì Excel 7 Grammar (Watermelon)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root{
      /* WATERMELON PALETTE */
      --green-main:#1b5e20;   /* —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω—ã–π –∫–æ–∂—É—Ä–∞ */
      --green-soft:#43a047;   /* –º—è–≥–∫–∏–π –∑–µ–ª—ë–Ω—ã–π */
      --pink-main:#ff6f91;    /* –º—è–∫–æ—Ç—å –∞—Ä–±—É–∑–∞ */
      --pink-soft:#ffb3c6;    /* —Å–≤–µ—Ç–ª–∞—è –º—è–∫–æ—Ç—å */
      --seed:#2d3436;         /* —Ü–≤–µ—Ç –∫–æ—Å—Ç–æ—á–µ–∫ */
      --bg:#fff8f8;           /* –ª—ë–≥–∫–∏–π —Ä–æ–∑–æ–≤—ã–π —Ñ–æ–Ω */
      --card:#ffffff;
      --border:#ffd1dc;       /* —Ä–æ–∑–æ–≤–∞—Ç–∞—è —Ä–∞–º–∫–∞ */
    }

    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    body{
      background:radial-gradient(circle at top,#ffeef5 0,#fff8f8 40%,#ffffff 100%);
      color:#3c2a2a;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }

    /* HEADER */
    header{
      background:linear-gradient(90deg,var(--green-main),var(--pink-main));
      color:#fff;
      padding:10px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
      position:sticky;
      top:0;
      z-index:10;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }

    .brand-logo{
      width:46px;
      height:46px;
      border-radius:50%;
      border:2px solid #fef3c7;
      background:
        radial-gradient(circle at 30% 30%,#ffe5ec 0,#ff9fb8 40%,#ff6f91 60%,#e91e63 80%),
        url("logo.png") center/60% no-repeat;
      box-shadow:0 0 0 3px rgba(255,255,255,0.35);
      flex-shrink:0;
    }

    .brand-text h1{
      font-size:18px;
      letter-spacing:0.03em;
      text-transform:uppercase;
    }

    .brand-text p{
      font-size:12px;
      opacity:0.9;
    }

    .grade-badge{
      border-radius:999px;
      padding:6px 14px;
      border:1px solid rgba(255,255,255,0.6);
      font-size:12px;
      display:flex;
      flex-direction:column;
      text-align:right;
      background:rgba(0,0,0,0.08);
      backdrop-filter:blur(4px);
    }

    .grade-badge span:first-child{
      font-weight:600;
    }

    #studentBadge{
      font-size:11px;
      margin-top:2px;
      opacity:0.95;
    }

    /* LAYOUT */
    main{
      flex:1;
      display:flex;
      flex-direction:row;
      gap:10px;
      padding:10px;
    }

    @media (max-width: 900px){
      main{
        flex-direction:column;
      }
    }

    /* LEFT: TOPICS PANEL */
    #topicsPanel{
      flex:0 0 290px;
      max-width:320px;
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:8px;
      box-shadow:0 6px 14px rgba(0,0,0,0.06);
    }

    @media (max-width: 900px){
      #topicsPanel{
        max-width:none;
        width:100%;
      }
    }

    #topicsPanel h2{
      font-size:16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:4px;
    }

    #topicsPanel h2 span{
      font-size:11px;
      font-weight:400;
      color:#7a4b4b;
      text-transform:uppercase;
      letter-spacing:0.06em;
    }

    .topic-list{
      list-style:none;
      max-height:70vh;
      overflow:auto;
      padding-right:4px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .topic-item{
      border-radius:12px;
      border:1px solid var(--border);
      padding:8px 10px;
      font-size:13px;
      background:linear-gradient(120deg,#fffafd,#fffafa);
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:6px;
      cursor:pointer;
      transition:background 0.15s, transform 0.1s, box-shadow 0.1s, border-color 0.15s;
    }

    .topic-item:hover{
      background:linear-gradient(120deg,#ffeef6,#fffafa);
      transform:translateY(-1px);
      box-shadow:0 3px 6px rgba(0,0,0,0.08);
    }

    .topic-item.active{
      background:linear-gradient(120deg,#ffdde9,#ffeef6);
      border-color:#ff8fab;
      box-shadow:0 0 0 1px rgba(255,143,171,0.5);
    }

    .topic-title{
      font-weight:600;
      font-size:13px;
      color:#3b2b2b;
    }

    .topic-meta{
      font-size:11px;
      color:#8c5b5b;
    }

    .topic-chip{
      font-size:10px;
      padding:2px 7px;
      border-radius:999px;
      border:1px solid rgba(27,94,32,0.25);
      background:#e9ffef;
      white-space:nowrap;
      color:#1b5e20;
    }

    /* CENTER: TOPIC VIEW */
    #topicView{
      flex:1;
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      padding:12px 14px;
      display:flex;
      flex-direction:column;
      gap:10px;
      box-shadow:0 6px 14px rgba(0,0,0,0.06);
      min-height:260px;
      position:relative;
      overflow:hidden;
    }

    #topicView::before{
      content:"";
      position:absolute;
      right:-40px;
      top:-40px;
      width:120px;
      height:120px;
      border-radius:50%;
      background:
        radial-gradient(circle at 30% 30%,#ffe4ec 0,#ffabc4 40%,#ff6f91 80%);
      opacity:0.18;
      pointer-events:none;
    }

    #topicHeader{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:8px;
      border-bottom:1px solid #ffd6e2;
      padding-bottom:6px;
      position:relative;
      z-index:1;
    }

    #topicHeader h2{
      font-size:18px;
      color:#402020;
    }

    #topicTagline{
      font-size:12px;
      color:#7a4b4b;
      margin-top:2px;
    }

    .topic-labels{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:flex-end;
      align-items:center;
    }

    .badge{
      font-size:10px;
      padding:3px 7px;
      border-radius:999px;
      border:1px solid rgba(64,32,32,0.18);
      background:#fff7fb;
      color:#5e3a3a;
    }

    .badge-level{
      border-color:rgba(27,94,32,0.4);
      background:#e9ffef;
      color:#1b5e20;
    }

    .badge-focus{
      border-color:rgba(255,111,145,0.6);
      background:#ffe5ef;
      color:#bf1e5b;
    }

    #explanation{
      font-size:14px;
      line-height:1.5;
      position:relative;
      z-index:1;
    }

    #explanation p{
      margin-bottom:4px;
    }

    #rulesRu{
      background:#fff9fb;
      border-radius:12px;
      border:1px dashed #ffb3c6;
      padding:8px 10px;
      font-size:13px;
      display:none;
    }

    #examples{
      font-size:13px;
      line-height:1.5;
      display:none;
    }

    #examples ul{
      padding-left:18px;
    }

    #examples li{
      margin-bottom:3px;
    }

    .examples-title{
      font-weight:600;
      margin-bottom:2px;
      font-size:13px;
    }

    /* EXERCISES */
    #tasks{
      margin-top:4px;
      display:none;
    }

    #tasks h3{
      font-size:15px;
      margin-bottom:4px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    #tasks h3 span{
      font-size:11px;
      color:#7a4b4b;
      text-transform:uppercase;
      letter-spacing:0.06em;
    }

    .task-item{
      border-radius:12px;
      border:1px solid var(--border);
      padding:7px 9px;
      margin-bottom:6px;
      font-size:13px;
      background:linear-gradient(120deg,#fffefe,#fff6fa);
    }

    .task-q{
      margin-bottom:4px;
    }

    .task-controls{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:center;
      margin-top:3px;
    }

    .task-answer{
      display:none;
      font-size:12px;
      color:#1b5e20;
      margin-top:2px;
    }

    .task-answer.visible{
      display:block;
    }

    .btn{
      border-radius:999px;
      padding:5px 10px;
      border:none;
      font-size:12px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }

    .btn-primary{
      background:var(--green-main);
      color:#fff;
    }

    .btn-outline{
      background:transparent;
      color:var(--green-main);
      border:1px solid rgba(27,94,32,0.4);
    }

    .btn:active{
      transform:translateY(1px);
      box-shadow:none;
    }

    .btn-print{
      font-size:11px;
      padding:3px 9px;
    }

    /* RIGHT: AI PANEL */
    #aiPanel{
      flex:0 0 320px;
      max-width:340px;
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      padding:10px 10px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      box-shadow:0 6px 14px rgba(0,0,0,0.06);
    }

    @media (max-width: 900px){
      #aiPanel{
        max-width:none;
        width:100%;
      }
    }

    #aiPanel h3{
      font-size:15px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    #aiPanel h3 span{
      font-size:11px;
      font-weight:400;
      color:#7a4b4b;
    }

    .chat-note{
      font-size:11px;
      color:#7a4b4b;
      line-height:1.4;
    }

    .chat-box{
      flex:1;
      border-radius:12px;
      background:#fff9fb;
      border:1px solid #ffd1dc;
      padding:6px 8px;
      overflow:auto;
      font-size:12px;
      max-height:260px;
    }

    .chat-msg{
      margin-bottom:6px;
      padding:4px 6px;
      border-radius:8px;
    }

    .chat-msg.user{
      background:#e3ffe6;
      align-self:flex-end;
    }

    .chat-msg.ai{
      background:#ffe5f0;
    }

    .chat-msg.system{
      background:#fff3cd;
    }

    #aiQuestion{
      width:100%;
      min-height:80px;
      border-radius:12px;
      border:1px solid var(--border);
      padding:6px 8px;
      font-size:13px;
      resize:vertical;
      background:#fffdfd;
    }

    .chat-actions{
      display:flex;
      justify-content:flex-end;
      margin-top:4px;
    }

    #aiStatus{
      font-size:11px;
      color:#7a4b4b;
      margin-top:2px;
      min-height:14px;
    }

    /* LOGIN OVERLAY */
    .login-overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.35);
      backdrop-filter:blur(3px);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:999;
    }

    .login-box{
      width:90%;
      max-width:380px;
      background:#ffffff;
      border-radius:18px;
      padding:16px 18px 18px;
      box-shadow:0 10px 30px rgba(0,0,0,0.35);
      border:1px solid var(--border);
    }

    .login-box h2{
      font-size:18px;
      margin-bottom:4px;
      color:#3c2a2a;
    }

    .login-box p{
      font-size:12px;
      color:#7a4b4b;
      margin-bottom:8px;
    }

    .login-field{
      margin-bottom:8px;
    }

    .login-field label{
      display:block;
      font-size:12px;
      margin-bottom:4px;
      color:#3c2a2a;
    }

    .login-field select,
    .login-field input{
      width:100%;
      padding:6px 8px;
      border-radius:10px;
      border:1px solid #ffc2d1;
      font-size:13px;
      background:#fff9fb;
    }

    .login-field select:focus,
    .login-field input:focus{
      outline:none;
      border-color:#ff6f91;
      box-shadow:0 0 0 1px rgba(255,111,145,0.3);
    }

    .login-error{
      min-height:14px;
      font-size:11px;
      color:#c62828;
      margin-top:4px;
    }

    /* FOOTER */
    footer{
      padding:6px 10px 10px;
      font-size:10px;
      color:#7a4b4b;
      text-align:center;
    }

    footer span{
      font-weight:600;
      color:var(--green-main);
    }

    /* PRINT */
    @media print{
      header, #aiPanel, #topicsPanel, footer, .login-overlay{
        display:none !important;
      }
      body{
        background:#ffffff;
      }
      #topicView{
        border:none;
        box-shadow:none;
      }
    }
  </style>
</head>
<body>

<!-- LOGIN OVERLAY -->
<div id="loginOverlay" class="login-overlay">
  <div class="login-box">
    <h2>ENGLISH WITH AI BAYAN ‚Äì 7 grade</h2>
    <p>–í–≤–µ–¥–∏ –ü–ò–ù-–∫–æ–¥ 7 –∫–ª–∞—Å—Å–∞ –∏ –≤—ã–±–µ—Ä–∏ —Å–≤–æ—ë –∏–º—è –∏–∑ –∂—É—Ä–Ω–∞–ª–∞.</p>

    <div class="login-field">
      <label for="studentName">–ò–º—è –∏–∑ —É—á–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞</label>
      <select id="studentName">
        <option value="">-- –≤—ã–±–µ—Ä–∏ —Å–≤–æ—ë –∏–º—è --</option>
        <option>–°—ã—Ä—ã–º7–°</option>
        <option>–°–∞–º–∏—Ä7–ë</option>
        <option>–û—Ä–¥–∞7–û</option>
        <option>–†—É—Å–ª–∞–Ω7–í</option>
        <option>–†—É—Å–ª–∞–Ω7–ò</option>
        <option>–ú–∞–∫—Å—É—Ç7–°</option>
        <option>–ê–¥–µ–ª–∏–Ω–∞7–ú</option>
        <option>–≠–ª—å–Ω–æ—Ä–∞7–ê</option>
        <option>–õ—É–Ω–∞—Ä–∞7–ê</option>
        <option>–ú–∞–∫—Å–∏–º7–ú</option>
        <option>–†–∏–Ω–∞—Ç7–¶</option>
        <option>–ê—Ä—Ç–µ–º7–ê</option>
        <option>–ë7–ê</option>
      </select>
    </div>

    <div class="login-field">
      <label for="pinInput">PIN-–∫–æ–¥</label>
      <input type="password" id="pinInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2844" />
    </div>

    <button id="loginBtn" class="btn btn-primary" style="width:100%; margin-top:4px;">
      –í–æ–π—Ç–∏ –≤ –≥—Ä–∞–º–º–∞—Ç–∏–∫—É
    </button>

    <p id="loginError" class="login-error"></p>
  </div>
</div>

<header>
  <div class="brand">
    <div class="brand-logo"></div>
    <div class="brand-text">
      <h1>ENGLISH WITH AI BAYAN</h1>
      <p>Excel 7 ‚Äì Watermelon Grammar</p>
    </div>
  </div>
  <div class="grade-badge">
    <span>Grade 7 ¬∑ Excel for Kazakhstan</span>
    <span>All grammar topics in order</span>
    <span id="studentBadge">Student: ---</span>
  </div>
</header>

<main>
  <!-- LEFT: TOPICS LIST -->
  <section id="topicsPanel">
    <h2>
      Grammar topics
      <span id="topicsCount"></span>
    </h2>
    <ul class="topic-list" id="topicList"></ul>
  </section>

  <!-- CENTER: TOPIC VIEW -->
  <section id="topicView">
    <div id="topicHeader">
      <div>
        <h2 id="topicTitle">Choose a topic</h2>
        <p id="topicTagline">
          Click on any topic on the left. Topics follow the Excel 7 grammar order (Modules 1‚Äì9).
        </p>
      </div>
      <div class="topic-labels">
        <span class="badge badge-level">Level: Grade 7 / Pre-Intermediate</span>
        <span class="badge badge-focus">Excel 7 grammar + practice</span>
        <button id="printBtn" class="btn btn-outline btn-print">üñ® Print topic</button>
      </div>
    </div>

    <div id="explanation">
      <p>–í—ã–±–µ—Ä–∏ —Ç–µ–º—É —Å–ª–µ–≤–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å:</p>
      <ul style="margin-left:18px; margin-top:4px; font-size:13px;">
        <li>–∫—Ä–∞—Ç–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º;</li>
        <li>–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –¥–ª—è 7 –∫–ª–∞—Å—Å–∞;</li>
        <li>—Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã;</li>
        <li>—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–æ–π ¬´Show answer¬ª.</li>
      </ul>
      <p style="margin-top:4px; font-size:12px; color:#7a4b4b;">
        –¢–µ–º—ã —Å–æ–±—Ä–∞–Ω—ã –ø–æ Contents Excel 7: –æ—Ç Present simple vs continuous –¥–æ Reported speech.
      </p>
    </div>

    <div id="rulesRu"></div>
    <div id="examples"></div>
    <div id="tasks"></div>
  </section>

  <!-- RIGHT: AI BAYAN CHAT -->
  <aside id="aiPanel">
    <div>
      <h3>
        AI Bayan ‚Äì Grammar help
        <span>Excel 7 ¬∑ any language</span>
      </h3>
      <p class="chat-note">
        –°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–π —Å–¥–µ–ª–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ ‚Äì
        —Å–ø—Ä–æ—Å–∏ AI Bayan: –º–æ–∂–Ω–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, —Ä—É—Å—Å–∫–æ–º –∏–ª–∏ –∫–∞–∑–∞—Ö—Å–∫–æ–º.
      </p>
    </div>

    <div id="chatBox" class="chat-box">
      <div class="chat-msg system">
        üí° Tip: write concrete questions like
        ‚ÄúExplain comparatives vs superlatives with 3 examples for 7th grade‚Äù
        or ‚Äú–ü—Ä–æ–≤–µ—Ä—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —è —Å–æ—Å—Ç–∞–≤–∏–ª —ç—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ‚Ä¶‚Äù.
      </div>
    </div>

    <div>
      <textarea id="aiQuestion"
        placeholder="Write your question for AI Bayan (e.g. ‚ÄúExplain Present Perfect vs Past Simple with Kazakh/Russian comments‚Äù)"></textarea>

      <div class="chat-actions">
        <button class="btn btn-primary" id="askBtn">Ask AI Bayan</button>
      </div>

      <p id="aiStatus"></p>
      <p class="chat-note">
        –í –±—É–¥—É—â–µ–º —É—á–∏—Ç–µ–ª—å —Å–º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã AI Bayan
        –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∂—É—Ä–Ω–∞–ª–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
      </p>
    </div>
  </aside>
</main>

<footer>
  <span>AI Bayan</span> ¬∑ Excel 7 Watermelon Grammar ¬∑ –ú–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω—è—Ç—å —Å–≤–æ–∏–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ –∏–∑ Student‚Äôs Book.
</footer>

<script>
/* -------- LOGIN LOGIC FOR 7 GRADE -------- */
const CLASS_PIN = "2844";

const allowedNames = [
  "–°—ã—Ä—ã–º7–°",
  "–°–∞–º–∏—Ä7–ë",
  "–û—Ä–¥–∞7–û",
  "–†—É—Å–ª–∞–Ω7–í",
  "–†—É—Å–ª–∞–Ω7–ò",
  "–ú–∞–∫—Å—É—Ç7–°",
  "–ê–¥–µ–ª–∏–Ω–∞7–ú",
  "–≠–ª—å–Ω–æ—Ä–∞7–ê",
  "–õ—É–Ω–∞—Ä–∞7–ê",
  "–ú–∞–∫—Å–∏–º7–ú",
  "–†–∏–Ω–∞—Ç7–¶",
  "–ê—Ä—Ç–µ–º7–ê",
  "–ë7–ê"
];

let currentStudentName = null;

const loginOverlay = document.getElementById("loginOverlay");
const studentNameSelect = document.getElementById("studentName");
const pinInput = document.getElementById("pinInput");
const loginBtn = document.getElementById("loginBtn");
const loginError = document.getElementById("loginError");
const studentBadge = document.getElementById("studentBadge");

function applyStudentName(){
  if(studentBadge && currentStudentName){
    studentBadge.textContent = "Student: " + currentStudentName;
  }
}

function tryLogin(){
  const name = (studentNameSelect.value || "").trim();
  const pin = (pinInput.value || "").trim();

  if(!name){
    loginError.textContent = "–í—ã–±–µ—Ä–∏ —Å–≤–æ—ë –∏–º—è –∏–∑ –∂—É—Ä–Ω–∞–ª–∞.";
    return;
  }

  if(!pin){
    loginError.textContent = "–í–≤–µ–¥–∏ PIN-–∫–æ–¥.";
    return;
  }

  if(pin !== CLASS_PIN){
    loginError.textContent = "–ù–µ–≤–µ—Ä–Ω—ã–π PIN-–∫–æ–¥. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.";
    pinInput.value = "";
    return;
  }

  if(!allowedNames.includes(name)){
    loginError.textContent = "–≠—Ç–æ –∏–º—è –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤ –∂—É—Ä–Ω–∞–ª–µ –¥–ª—è —ç—Ç–æ–≥–æ –ü–ò–ù.";
    return;
  }

  // —É—Å–ø–µ—Ö
  currentStudentName = name;
  loginError.textContent = "";
  loginOverlay.style.display = "none";
  applyStudentName();
  console.log("Logged in as:", currentStudentName);
}

if(loginBtn){
  loginBtn.addEventListener("click", tryLogin);
}

if(pinInput){
  pinInput.addEventListener("keydown", (e) => {
    if(e.key === "Enter"){
      e.preventDefault();
      tryLogin();
    }
  });
}

/* ------------- PRINT BUTTON ------------- */
const printBtn = document.getElementById("printBtn");
function printTopic(){
  window.print();
}
if(printBtn){
  printBtn.addEventListener("click", printTopic);
}

/* ------------- GRAMMAR TOPICS (Excel 7 order, grouped) ------------- */

const topics = [
  {
    id:1,
    module:"Module 1 ‚Äì Hobbies & Leisure (Excel 7 SB pp. 5‚Äì16)",
    title:"Present Simple vs Present Continuous",
    focus:"habits vs actions now",
    explanation: `
      We use <strong>Present Simple</strong> for facts, routines and habits
      (every day, usually, always).<br>
      We use <strong>Present Continuous</strong> for actions happening
      <strong>now / at the moment</strong>.
    `,
    ruleRu: `
      <b>Present Simple</b> ‚Äì –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ä–∞—Å–ø–æ—Ä—è–¥–æ–∫, —Ñ–∞–∫—Ç—ã.
      –ú–∞—Ä–∫–µ—Ä—ã: every day, usually, often, on Mondays –∏ —Ç.–¥.<br>
      –§–æ—Ä–º—ã: I/you/we/they <b>play</b>, he/she/it <b>plays</b>.
      –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ: do/does, don't/doesn't.<br><br>
      <b>Present Continuous</b> ‚Äì –¥–µ–π—Å—Ç–≤–∏–µ ¬´–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å / –≤–æ–∫—Ä—É–≥ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ¬ª.
      –§–æ—Ä–º—ã: am/is/are + V-ing (I am reading, She is reading).<br>
      –ú–∞—Ä–∫–µ—Ä—ã: now, at the moment, today, this week.<br><br>
      –í Excel 7 —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É.
    `,
    examples:[
      "I usually do my homework in the evening. (Present Simple)",
      "She is doing her homework now. (Present Continuous)",
      "They don't go to school on Sundays.",
      "Are you listening to the teacher now?"
    ],
    tasks:[
      {
        question:"Choose the correct form: Look! Tom ___ (plays / is playing) basketball now.",
        answer:"Look! Tom is playing basketball now. (now ‚Üí Present Continuous)"
      },
      {
        question:"Complete: My brother ___ (usually / now) ___ (watch) TV in the evening, but today he ___ (do) his homework.",
        answer:"My brother usually watches TV in the evening, but today he is doing his homework."
      }
    ]
  },
  {
    id:2,
    module:"Module 1 ‚Äì Hobbies & Leisure (Excel 7 SB pp. 5‚Äì16)",
    title:"Singular & plural nouns",
    focus:"regular and irregular plurals",
    explanation: `
      <strong>Countable nouns</strong> have singular and plural forms:
      a book ‚Äì two books. Many plurals use <strong>-s/-es</strong>, but some
      are irregular.
    `,
    ruleRu: `
      –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: a hobby, an apple, a child.<br>
      –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ: hobbies, apples, children.<br><br>
      <b>–û–±—ã—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:</b><br>
      ‚Ä¢ book ‚Üí books<br>
      ‚Ä¢ box ‚Üí boxes (–ø–æ—Å–ª–µ s, sh, ch, x, o ‚Üí -es)<br>
      ‚Ä¢ hobby ‚Üí hobbies (—Å–æ–≥–ª–∞—Å–Ω–∞—è + y ‚Üí -ies)<br><br>
      <b>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:</b> child ‚Üí children, man ‚Üí men, woman ‚Üí women,
      person ‚Üí people, foot ‚Üí feet, tooth ‚Üí teeth –∏ —Ç.–¥.<br>
      –í Excel 7 —á–∞—Å—Ç–æ –ø—Ä–æ—Å—è—Ç ¬´Write the plural of the words¬ª.
    `,
    examples:[
      "This hobby is interesting. These hobbies are interesting.",
      "There is a child in the room. There are two children in the room.",
      "I have one book and three notebooks."
    ],
    tasks:[
      {
        question:"Write the plural: a hobby, a box, a child, a man.",
        answer:"hobbies, boxes, children, men."
      },
      {
        question:"Complete: There ___ (be) two ___ (person) in the room.",
        answer:"There are two people in the room."
      }
    ]
  },
  {
    id:3,
    module:"Module 1 ‚Äì Hobbies & Leisure (Excel 7 SB pp. 5‚Äì16)",
    title:"Comparatives, superlatives, very / much / as ‚Ä¶ as / too / enough",
    focus:"comparison of adjectives",
    explanation: `
      We use the <strong>comparative</strong> to compare two things
      (bigger, more exciting) and the <strong>superlative</strong> for
      three or more (the biggest, the most exciting).<br>
      We also use <strong>very, much, as ‚Ä¶ as, too, enough</strong> to
      give more information about degree.
    `,
    ruleRu: `
      <b>Comparative</b> ‚Äì —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å—Ç–µ–ø–µ–Ω—å: tall ‚Üí taller,
      big ‚Üí bigger, interesting ‚Üí more interesting.<br>
      <b>Superlative</b> ‚Äì –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–∞—è: the tallest, the biggest,
      the most interesting.<br><br>
      very ‚Äì –æ—á–µ–Ω—å: very interesting;<br>
      much ‚Äì –Ω–∞–º–Ω–æ–≥–æ (–ø–µ—Ä–µ–¥ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–π): much bigger;<br>
      as ‚Ä¶ as ‚Äì —Ç–∞–∫–æ–π –∂–µ ‚Ä¶ –∫–∞–∫: as tall as;<br>
      too ‚Äì —Å–ª–∏—à–∫–æ–º: too difficult;<br>
      enough ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ: tall enough, big enough.<br><br>
      –í Excel 7 —ç—Ç–æ –≤—Å—ë –∏–¥—ë—Ç –æ–¥–Ω–∏–º –±–ª–æ–∫–æ–º.
    `,
    examples:[
      "This hobby is more exciting than watching TV.",
      "Dombra is one of the most popular instruments in Kazakhstan.",
      "This exercise is too difficult for me.",
      "The film is not interesting enough."
    ],
    tasks:[
      {
        question:"Make one sentence: English / interesting / Maths (comparative).",
        answer:"English is more interesting than Maths."
      },
      {
        question:"Complete with too or enough: This bag is ___ heavy. I can‚Äôt carry it. / The water is warm ___. You can swim.",
        answer:"This bag is too heavy. I can‚Äôt carry it. / The water is warm enough. You can swim."
      }
    ]
  },
  {
    id:4,
    module:"Module 2 ‚Äì Communication & Technology (Excel 7 SB pp. 17‚Äì30)",
    title:"Can / Could / Be able to (ability)",
    focus:"ability now, in the past and in special situations",
    explanation: `
      <strong>Can</strong> shows ability now or general ability.
      <strong>Could</strong> is ability in the past or polite requests.
      <strong>Be able to</strong> works in many tenses.
    `,
    ruleRu: `
      <b>Can</b>: I can swim. ‚Äì –Ø —É–º–µ—é –ø–ª–∞–≤–∞—Ç—å.<br>
      <b>Could</b>: I could swim when I was five. ‚Äì –Ø –º–æ–≥ –ø–ª–∞–≤–∞—Ç—å, –∫–æ–≥–¥–∞ –º–Ω–µ –±—ã–ª–æ 5.<br>
      –í–µ–∂–ª–∏–≤–∞—è –ø—Ä–æ—Å—å–±–∞: Could you help me, please?<br><br>
      <b>Be able to</b> ‚Äì ¬´–±—ã—Ç—å —Å–ø–æ—Å–æ–±–Ω—ã–º¬ª: am/is/are/was/were/will be able to.<br>
      –£–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –≤–∏–¥ –≤—Ä–µ–º–µ–Ω–∏: will be able to, have been able to –∏ —Ç.–¥.
    `,
    examples:[
      "I can use a computer very well.",
      "When she was ten, she could play the piano.",
      "Will you be able to come to the party?",
      "Could you send me an email, please?"
    ],
    tasks:[
      {
        question:"Choose: When I was a child, I ___ (can / could) ride a bike.",
        answer:"When I was a child, I could ride a bike."
      },
      {
        question:"Complete: Next year I ___ (be able to) speak English better.",
        answer:"Next year I will be able to speak English better."
      }
    ]
  },
  {
    id:5,
    module:"Module 2 ‚Äì Communication & Technology (Excel 7 SB pp. 17‚Äì30)",
    title:"Used to (past habits) & time words",
    focus:"past habits vs present and time expressions",
    explanation: `
      We use <strong>used to</strong> for past habits and states
      which are not true now. Time words help us show when.
    `,
    ruleRu: `
      <b>Used to</b> + V ‚Äì ¬´—Ä–∞–Ω—å—à–µ –¥–µ–ª–∞–ª, —Å–µ–π—á–∞—Å –Ω–µ—Ç¬ª.<br>
      I used to play computer games every day, but now I don‚Äôt.<br><br>
      –í–æ–ø—Ä–æ—Å: Did you use to ‚Ä¶?<br>
      –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ: didn‚Äôt use to ‚Ä¶<br><br>
      <b>Time words:</b> yesterday, last year, in 2019, two days ago,
      when I was 10, in the past –∏ —Ç.–¥.
    `,
    examples:[
      "I used to watch a lot of TV, but now I prefer reading.",
      "My grandfather used to live in a village.",
      "Did you use to play computer games every day?",
      "He didn‚Äôt use to like English."
    ],
    tasks:[
      {
        question:"Rewrite: Now I walk to school. Before I went by bus every day. (use used to)",
        answer:"I used to go to school by bus every day, but now I walk."
      },
      {
        question:"Make a question: you / play / football / every weekend (in the past)?",
        answer:"Did you use to play football every weekend?"
      }
    ]
  },
  {
    id:6,
    module:"Module 2 ‚Äì Communication & Technology (Excel 7 SB pp. 17‚Äì30)",
    title:"Adjectives, -ing/-ed adjectives, adverbs, quite / rather",
    focus:"describing people and things",
    explanation: `
      Adjectives describe nouns (a <strong>funny</strong> video).<br>
      <strong>-ing</strong> adjectives describe things (boring, exciting),
      <strong>-ed</strong> adjectives describe how we feel (bored, excited).<br>
      Adverbs describe verbs (speak <strong>slowly</strong>).<br>
      <strong>Quite</strong> and <strong>rather</strong> show degree.
    `,
    ruleRu: `
      <b>–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ</b>: clever, noisy, difficult, exciting –∏ —Ç.–¥.<br>
      -ing ‚Üí ¬´–∫–∞–∫–æ–π¬ª (—Ñ–∏–ª—å–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π), -ed ‚Üí ¬´–∫–∞–∫–æ–π —è¬ª (—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω).<br>
      The film is boring. ‚Äì I am bored.<br><br>
      <b>–ù–∞—Ä–µ—á–∏—è</b>: adjective + -ly (careful ‚Üí carefully).<br>
      He speaks slowly and clearly.<br><br>
      quite ‚Äì –¥–æ–≤–æ–ª—å–Ω–æ, –¥–æ–≤–æ–ª—å–Ω–æ-—Ç–∞–∫–∏; rather ‚Äì –¥–æ–≤–æ–ª—å–Ω–æ (—á–∞—Å—Ç–æ —Å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º).
    `,
    examples:[
      "This computer game is very exciting.",
      "I‚Äôm excited about the new film.",
      "She speaks English quite well.",
      "It‚Äôs rather cold today."
    ],
    tasks:[
      {
        question:"Choose: The book is very (interesting / interested). I am (interesting / interested) in it.",
        answer:"The book is very interesting. I am interested in it."
      },
      {
        question:"Complete with an adverb: He is a careful driver. He drives very ___ .",
        answer:"He is a careful driver. He drives very carefully."
      }
    ]
  },
  {
    id:7,
    module:"Module 2 ‚Äì Communication & Technology (Excel 7 SB pp. 17‚Äì30)",
    title:"Should / Shouldn‚Äôt (advice)",
    focus:"giving advice and recommendations",
    explanation: `
      We use <strong>should / shouldn‚Äôt</strong> to give advice or say
      that something is a good or bad idea.
    `,
    ruleRu: `
      <b>Should + V</b> ‚Äì ¬´—Å–ª–µ–¥—É–µ—Ç, —Å—Ç–æ–∏—Ç¬ª: You should study every day.<br>
      <b>Shouldn‚Äôt + V</b> ‚Äì ¬´–Ω–µ —Å—Ç–æ–∏—Ç¬ª: You shouldn‚Äôt spend so much time online.<br>
      –ü–æ—Å–ª–µ should / shouldn‚Äôt ‚Äì –≤—Å–µ–≥–¥–∞ –≥–ª–∞–≥–æ–ª –±–µ–∑ to: should go, shouldn‚Äôt play.
    `,
    examples:[
      "You should do your homework before you play games.",
      "You shouldn‚Äôt eat so much junk food.",
      "Should I take an umbrella today?"
    ],
    tasks:[
      {
        question:"Give advice: Your friend is tired. (use should)",
        answer:"You should go to bed earlier. / You should have a rest."
      },
      {
        question:"Make a negative sentence with shouldn‚Äôt: spend / a lot of time / on social media.",
        answer:"You shouldn‚Äôt spend a lot of time on social media."
      }
    ]
  },
  {
    id:8,
    module:"Module 3 ‚Äì Holidays & Travel (Excel 7 SB pp. 29‚Äì40)",
    title:"Present Perfect + just / yet / already / since / for",
    focus:"experience and result connected with now",
    explanation: `
      We use <strong>Present Perfect</strong> (have/has + V3) to talk
      about experience and results connected with now.
      We often use <strong>just, yet, already, since, for</strong>.
    `,
    ruleRu: `
      –§–æ—Ä–º—É–ª–∞: have/has + V3 (3-—è —Ñ–æ—Ä–º–∞): I have seen, She has gone.<br><br>
      <b>just</b> ‚Äì —Ç–æ–ª—å–∫–æ —á—Ç–æ: He has just finished.<br>
      <b>already</b> ‚Äì —É–∂–µ (–≤ —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω—ã—Ö): She has already done it.<br>
      <b>yet</b> ‚Äì —É–∂–µ/–µ—â—ë (–≤ –≤–æ–ø—Ä–æ—Å–∞—Ö –∏ –æ—Ç—Ä–∏—Ü.): Have you finished yet? / I haven‚Äôt finished yet.<br>
      <b>since</b> ‚Äì —Å –∫–∞–∫–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞: since 2010, since Monday.<br>
      <b>for</b> ‚Äì –∫–∞–∫ –¥–æ–ª–≥–æ: for two days, for five years.
    `,
    examples:[
      "I have just done my homework.",
      "She has already visited Almaty.",
      "We haven‚Äôt eaten yet.",
      "He has lived in Aktau for ten years."
    ],
    tasks:[
      {
        question:"Complete: She ___ just ___ (finish) her project.",
        answer:"She has just finished her project."
      },
      {
        question:"Choose: I have lived here (since / for) 2015.",
        answer:"I have lived here since 2015."
      }
    ]
  },
  {
    id:9,
    module:"Module 3 ‚Äì Holidays & Travel (Excel 7 SB pp. 29‚Äì40)",
    title:"Have been vs have gone & Present Perfect vs Past Simple",
    focus:"experience vs finished past time",
    explanation: `
      <strong>Have been (to)</strong> ‚Äì sb went and came back.
      <strong>Have gone (to)</strong> ‚Äì sb is still there.<br>
      <strong>Present Perfect</strong> ‚Äì experience / result, time not important.
      <strong>Past Simple</strong> ‚Äì finished action at a specific time.
    `,
    ruleRu: `
      <b>Have been to</b>: I have been to Astana. ‚Äì –Ø —É–∂–µ —Ç–∞–º –±—ã–ª (–æ–ø—ã—Ç).<br>
      <b>Have gone to</b>: She has gone to school. ‚Äì –û–Ω–∞ —É—à–ª–∞ –∏ —Å–µ–π—á–∞—Å –≤ —à–∫–æ–ª–µ.<br><br>
      <b>Present Perfect</b> ‚Äì –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏: I have seen this film.<br>
      <b>Past Simple</b> ‚Äì –µ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –≤—Ä–µ–º—è: I saw this film yesterday.<br>
      –í Excel 7 –ª—é–±—è—Ç –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –¥–≤—É–º—è –≤—Ä–µ–º–µ–Ω–∞–º–∏.
    `,
    examples:[
      "I have been to London twice.",
      "She has gone to the shop. (She isn‚Äôt here now.)",
      "We saw this film last week.",
      "We have seen this film three times."
    ],
    tasks:[
      {
        question:"Choose: Tom ___ (has been / has gone) to the supermarket. He will be back soon.",
        answer:"Tom has gone to the supermarket. He will be back soon."
      },
      {
        question:"Choose: I ___ (have visited / visited) Paris in 2019.",
        answer:"I visited Paris in 2019. (specific time ‚Üí Past Simple)"
      }
    ]
  },
  {
    id:10,
    module:"Module 4 ‚Äì Space & Earth (Excel 7 SB pp. 41‚Äì54)",
    title:"Future: will / be going to / Present Continuous (future meaning)",
    focus:"predictions, plans, arrangements",
    explanation: `
      <strong>Will</strong> ‚Äì predictions, promises, instant decisions.<br>
      <strong>Be going to</strong> ‚Äì plans and intentions, evidence.<br>
      <strong>Present Continuous (future)</strong> ‚Äì fixed arrangements (time/place).
    `,
    ruleRu: `
      <b>Will</b>: I think it will rain. I will help you.<br>
      –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ: won‚Äôt + V.<br><br>
      <b>Be going to</b>: I‚Äôm going to visit my grandparents. (–ø–ª–∞–Ω).<br>
      It‚Äôs cloudy. It‚Äôs going to rain. (–µ—Å—Ç—å ¬´–∑–Ω–∞–∫–∏¬ª).<br><br>
      <b>Present Continuous (future)</b>: I‚Äôm meeting my friend at 5 o‚Äôclock.
      (–µ—Å—Ç—å —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è/–¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å).
    `,
    examples:[
      "It‚Äôs very cloudy. It‚Äôs going to rain.",
      "I think our team will win.",
      "We are visiting the planetarium on Saturday.",
      "I‚Äôm going to study harder this term."
    ],
    tasks:[
      {
        question:"Choose: Look at those dark clouds. It ___ (will / is going to) rain.",
        answer:"Look at those dark clouds. It is going to rain."
      },
      {
        question:"Make a sentence (Present Continuous ‚Äì arrangement): you / meet / your friend / at 4 o‚Äôclock / tomorrow.",
        answer:"I am meeting my friend at 4 o‚Äôclock tomorrow."
      }
    ]
  },
  {
    id:11,
    module:"Module 6 ‚Äì Entertainment & Media (Excel 7 SB pp. 61‚Äì72)",
    title:"Passive (Present Simple & Past Simple) and it/there",
    focus:"focus on action, not the doer",
    explanation: `
      In the <strong>Passive Voice</strong> the object becomes the subject:
      ‚ÄúThe film was watched by many people.‚Äù<br>
      We use <strong>it</strong> and <strong>there</strong> in special structures:
      ‚ÄúIt is cold.‚Äù ‚ÄúThere is a cinema near my house.‚Äù
    `,
    ruleRu: `
      –°—Ö–µ–º–∞: be + V3.<br>
      Present Simple Passive: am/is/are + V3 ‚Üí The film is watched.<br>
      Past Simple Passive: was/were + V3 ‚Üí The film was watched.<br><br>
      <b>It</b> –¥–ª—è –ø–æ–≥–æ–¥—ã, –≤—Ä–µ–º–µ–Ω–∏, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è: It is cold. It is 5 o‚Äôclock.<br>
      <b>There is/are</b> –¥–ª—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è: There is a TV in my room. There are many films on TV.
    `,
    examples:[
      "Many films are shown on TV.",
      "This programme is watched by millions of people.",
      "The film was made in 2017.",
      "There is a cinema near my house."
    ],
    tasks:[
      {
        question:"Change into passive: People watch this TV show every Saturday.",
        answer:"This TV show is watched every Saturday."
      },
      {
        question:"Complete with there is / there are / it is: ___ a new film on TV tonight. ___ very interesting.",
        answer:"There is a new film on TV tonight. It is very interesting."
      }
    ]
  },
  {
    id:12,
    module:"Module 7 ‚Äì Natural Disasters (Excel 7 SB pp. 73‚Äì84)",
    title:"Past Continuous & Past Continuous vs Past Simple",
    focus:"background action vs short action in the past",
    explanation: `
      <strong>Past Continuous</strong> (was/were + V-ing) describes an
      action in progress in the past.<br>
      Often we combine it with <strong>Past Simple</strong> for a long
      action and a short action.
    `,
    ruleRu: `
      –§–æ—Ä–º—É–ª–∞: was / were + V-ing.<br>
      I was doing, they were playing.<br><br>
      –î–≤–µ —Å–∏—Ç—É–∞—Ü–∏–∏:<br>
      ‚Ä¢ –î–ª–∏–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (—Ñ–æ–Ω): I was walking home‚Ä¶<br>
      ‚Ä¢ –ö–æ—Ä–æ—Ç–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–ø–µ—Ä–µ–±–∏–ª–æ): ‚Ä¶when it started to rain.<br>
      –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–æ–≤–∞: when, while.
    `,
    examples:[
      "I was doing my homework at 7 o‚Äôclock yesterday.",
      "They were playing football when it started to rain.",
      "While we were watching TV, the lights went out."
    ],
    tasks:[
      {
        question:"Complete: He ___ (drive) home when he ___ (see) the accident.",
        answer:"He was driving home when he saw the accident."
      },
      {
        question:"Make a sentence with while: we / have dinner / the phone / ring.",
        answer:"While we were having dinner, the phone rang."
      }
    ]
  },
  {
    id:13,
    module:"Module 8 ‚Äì Healthy Habits (Excel 7 SB pp. 85‚Äì96)",
    title:"Zero, First and Second Conditionals",
    focus:"real and unreal situations",
    explanation: `
      <strong>Zero Conditional</strong>: facts (If + Present, Present).<br>
      <strong>First Conditional</strong>: real future (If + Present, will + V).<br>
      <strong>Second Conditional</strong>: unreal, imaginary (If + Past, would + V).
    `,
    ruleRu: `
      <b>Zero</b>: If you heat water to 100¬∞C, it boils. (—Ñ–∞–∫—Ç, –≤—Å–µ–≥–¥–∞ —Ç–∞–∫).<br>
      <b>First</b>: If I study hard, I will pass the exam. (—Ä–µ–∞–ª—å–Ω–æ, –±—É–¥—É—â–µ–µ).<br>
      <b>Second</b>: If I had more free time, I would do more sport. (–Ω–µ—Ä–µ–∞–ª—å–Ω–æ/–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ).<br><br>
      –ó–∞–ø—è—Ç–∞—è –≤ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ if-–∫–ª–∞—É–∑ —Å—Ç–æ–∏—Ç –ø–µ—Ä–≤—ã–º.
    `,
    examples:[
      "If you eat a lot of junk food, you get unhealthy.",
      "If it rains tomorrow, we will stay at home.",
      "If I were you, I would go to bed earlier."
    ],
    tasks:[
      {
        question:"Make a first conditional: If / you / eat / healthier food, / you / feel / better.",
        answer:"If you eat healthier food, you will feel better."
      },
      {
        question:"Make a second conditional: If I / have / more time, / I / do / more sport.",
        answer:"If I had more time, I would do more sport."
      }
    ]
  },
  {
    id:14,
    module:"Module 8 ‚Äì Healthy Habits (Excel 7 SB pp. 85‚Äì96)",
    title:"Modals: must / have to / need to / might",
    focus:"obligation and possibility",
    explanation: `
      <strong>Must</strong> and <strong>have to</strong> show obligation.
      <strong>Need to</strong> is similar. <strong>Might</strong> shows
      weak possibility.
    `,
    ruleRu: `
      <b>Must</b> ‚Äì –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å/–ø—Ä–∞–≤–∏–ª–æ: You must do your homework.<br>
      <b>Have to</b> ‚Äì –≤–Ω–µ—à–Ω–µ–µ –ø—Ä–∞–≤–∏–ª–æ: I have to wear a uniform at school.<br>
      <b>Need to</b> ‚Äì –Ω—É–∂–Ω–æ: You need to drink more water.<br>
      <b>Might</b> ‚Äì –≤–æ–∑–º–æ–∂–Ω–æ (20‚Äì40%): It might rain later.<br><br>
      –ü–æ—Å–ª–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö ‚Äì –≥–ª–∞–≥–æ–ª –±–µ–∑ to (–∫—Ä–æ–º–µ need to): must go, have to go, might go.
    `,
    examples:[
      "You mustn‚Äôt smoke here.",
      "I have to get up early on weekdays.",
      "You need to do more exercise.",
      "It might be sunny tomorrow."
    ],
    tasks:[
      {
        question:"Choose: You ___ (must / might) wear a helmet when you ride a bike. It‚Äôs a rule.",
        answer:"You must wear a helmet when you ride a bike."
      },
      {
        question:"Make a sentence with might: it / rain / later.",
        answer:"It might rain later."
      }
    ]
  },
  {
    id:15,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Verb patterns: V + -ing / to-infinitive / bare infinitive",
    focus:"like doing, want to do, can do",
    explanation: `
      Some verbs are followed by <strong>V-ing</strong>, some by
      <strong>to-infinitive</strong>, some by <strong>bare infinitive</strong>
      (without to).
    `,
    ruleRu: `
      <b>V + -ing</b>: like, love, enjoy, hate, don‚Äôt mind: I enjoy reading.<br>
      <b>V + to-infinitive</b>: want, decide, hope, plan, need: I want to go home.<br>
      <b>Modal + V</b> (–±–µ–∑ to): can, must, should, might: I can swim.<br>
      –¢–∞–∫–∂–µ: let + smb + V (let me go), make + smb + V (make him study).
    `,
    examples:[
      "I enjoy listening to music.",
      "She wants to buy a new dress.",
      "We decided to stay at home.",
      "I can‚Äôt wear this jacket. It is too small."
    ],
    tasks:[
      {
        question:"Complete with -ing or to-infinitive: I like ___ (watch) films, but today I want ___ (read) a book.",
        answer:"I like watching films, but today I want to read a book."
      },
      {
        question:"Choose: He decided (to buy / buying) new trainers.",
        answer:"He decided to buy new trainers."
      }
    ]
  },
  {
    id:16,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Relative clauses: who / which / where",
    focus:"joining sentences with relative pronouns",
    explanation: `
      We use <strong>who</strong> for people, <strong>which</strong> for
      things and animals, <strong>where</strong> for places.
    `,
    ruleRu: `
      <b>Who</b> ‚Äì –ª—é–¥–∏: The boy who is wearing a cap is my brother.<br>
      <b>Which</b> ‚Äì –≤–µ—â–∏/–∂–∏–≤–æ—Ç–Ω—ã–µ: The dress which I bought is green.<br>
      <b>Where</b> ‚Äì –º–µ—Å—Ç–∞: The shop where I work is in the city centre.<br>
      –í Excel 7 —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ —Å–æ–µ–¥–∏–Ω–∏—Ç—å –¥–≤–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
    `,
    examples:[
      "The girl who is wearing a red dress is my cousin.",
      "This is the shop where I buy my clothes.",
      "The film which we watched yesterday was funny."
    ],
    tasks:[
      {
        question:"Join: This is the man. He designed our school uniform. (who)",
        answer:"This is the man who designed our school uniform."
      },
      {
        question:"Join: This is the shop. I always buy jeans there. (where)",
        answer:"This is the shop where I always buy jeans."
      }
    ]
  },
  {
    id:17,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Determiners: all / other & some / any / every / no (compounds)",
    focus:"quantifiers and compounds (something, everybody‚Ä¶) ",
    explanation: `
      We use <strong>all, other</strong> and <strong>some, any, every, no</strong>
      with nouns and in compounds: somebody, anywhere, everyone, nothing.
    `,
    ruleRu: `
      <b>all</b> ‚Äì –≤—Å–µ: all students, all my friends;<br>
      <b>another / other</b> ‚Äì –¥—Ä—É–≥–æ–π, –¥—Ä—É–≥–∏–µ.<br><br>
      some ‚Äì –Ω–µ–º–Ω–æ–≥–æ/–∫–∞–∫–æ–π-—Ç–æ (—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è); any ‚Äì –≤ –≤–æ–ø—Ä–æ—Å–∞—Ö/–æ—Ç—Ä–∏—Ü–∞–Ω–∏—è—Ö;<br>
      every ‚Äì –∫–∞–∂–¥—ã–π; no ‚Äì –Ω–∏–∫–∞–∫–æ–π.<br>
      compound words: somebody, anybody, everybody, nobody, somewhere, anywhere, everywhere, nowhere.<br>
      <i>–í–∞–∂–Ω–æ:</i> –ø–æ—Å–ª–µ no- –∏ every- —Å–ª–æ–≤–∞ –≥–ª–∞–≥–æ–ª –æ–±—ã—á–Ω–æ –≤ –µ–¥. —á–∏—Å–ª–µ:
      Everybody is here. Nobody knows.
    `,
    examples:[
      "All my friends like this style.",
      "Somebody knocked at the door.",
      "I don‚Äôt know anything about fashion.",
      "Everybody is wearing jeans today."
    ],
    tasks:[
      {
        question:"Choose: ___ (Everybody / All people) in my class likes casual clothes.",
        answer:"Everybody in my class likes casual clothes. / All people in my class like casual clothes."
      },
      {
        question:"Complete: I can‚Äôt find my T-shirt. There is ___ (nothing / nobody) in the wardrobe.",
        answer:"I can‚Äôt find my T-shirt. There is nothing in the wardrobe."
      }
    ]
  },
  {
    id:18,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Reported speech: statements & said/told",
    focus:"he said that‚Ä¶, he told me that‚Ä¶",
    explanation: `
      In <strong>reported speech</strong> we repeat what someone said,
      often changing the tense (backshift) and pronouns.
      We use <strong>said</strong> without object, and <strong>told</strong>
      with object.
    `,
    ruleRu: `
      <b>–ü—Ä—è–º–∞—è —Ä–µ—á—å</b>: ‚ÄúI like this dress,‚Äù she said.<br>
      <b>–ö–æ—Å–≤–µ–Ω–Ω–∞—è</b>: She said (that) she liked that dress.<br><br>
      <b>said</b> ‚Äì –±–µ–∑ –æ–±—ä–µ–∫—Ç–∞: She said that‚Ä¶<br>
      <b>told</b> ‚Äì —Å –æ–±—ä–µ–∫—Ç–æ–º: She told me that‚Ä¶<br><br>
      –ß–∞—Å—Ç–æ —Å–¥–≤–∏–≥–∞–µ–º –≤—Ä–µ–º—è –Ω–∞–∑–∞–¥: Present ‚Üí Past, will ‚Üí would, can ‚Üí could.
    `,
    examples:[
      "Tom said that he was tired.",
      "My mum told me that I had to clean my room.",
      "She said that she didn‚Äôt like this colour."
    ],
    tasks:[
      {
        question:"Change into reported speech: ‚ÄúI am busy today,‚Äù he said.",
        answer:"He said (that) he was busy that day."
      },
      {
        question:"Complete: She ___ me that the lesson ___ difficult. (said/told, be)",
        answer:"She told me that the lesson was difficult."
      }
    ]
  },
  {
    id:19,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Reported questions",
    focus:"changing word order and question words",
    explanation: `
      In <strong>reported questions</strong> we change the word order to
      that of a statement and use <strong>if/whether</strong> or a
      question word (what, where, why‚Ä¶).
    `,
    ruleRu: `
      –ü—Ä—è–º–∞—è: ‚ÄúWhere do you buy your clothes?‚Äù she asked me.<br>
      –ö–æ—Å–≤–µ–Ω–Ω–∞—è: She asked me where I bought my clothes.<br><br>
      –ù–µ—Ç –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞: <i>where I bought</i>, –Ω–µ *where did I buy*.<br>
      Yes/No-–≤–æ–ø—Ä–æ—Å—ã ‚Üí if/whether: ‚ÄúDo you like this T-shirt?‚Äù ‚Üí He asked if I liked that T-shirt.
    `,
    examples:[
      "He asked me where I bought my jacket.",
      "She asked if I liked this style.",
      "They asked what I was wearing."
    ],
    tasks:[
      {
        question:"Change into reported question: ‚ÄúDo you like these shoes?‚Äù the shop assistant asked.",
        answer:"The shop assistant asked if I liked those shoes."
      },
      {
        question:"Change into reported question: ‚ÄúWhere are you going?‚Äù my friend asked me.",
        answer:"My friend asked me where I was going."
      }
    ]
  },
  {
    id:20,
    module:"Module 9 ‚Äì Clothes & Fashion (Excel 7 SB pp. 97‚Äì112)",
    title:"Reported commands and requests",
    focus:"tell/ask + object + to-infinitive / not to",
    explanation: `
      We report orders and requests with <strong>tell / ask + object +
      (not) to + V</strong>.
    `,
    ruleRu: `
      –ü—Ä—è–º–∞—è: ‚ÄúTry on this jacket,‚Äù she said to me.<br>
      –ö–æ—Å–≤–µ–Ω–Ω–∞—è: She told me to try on that jacket.<br><br>
      –ü—Ä—è–º–∞—è: ‚ÄúDon‚Äôt be late,‚Äù my mum said.<br>
      –ö–æ—Å–≤–µ–Ω–Ω–∞—è: My mum told me not to be late.<br><br>
      –°—Ö–µ–º–∞: told/asked + –æ–±—ä–µ–∫—Ç + (not) to + –≥–ª–∞–≥–æ–ª.
    `,
    examples:[
      "The teacher told us to do our homework.",
      "My mum told me not to wear this T-shirt.",
      "He asked me to help him."
    ],
    tasks:[
      {
        question:"Change into reported speech: ‚ÄúDon‚Äôt forget your PE kit,‚Äù the teacher said.",
        answer:"The teacher told us not to forget our PE kit."
      },
      {
        question:"Change into reported speech: ‚ÄúTry these jeans on,‚Äù my friend said.",
        answer:"My friend told me to try those jeans on."
      }
    ]
  }
];

/* ------------- RENDER TOPIC LIST ------------- */
const topicListEl = document.getElementById("topicList");
const topicsCountEl = document.getElementById("topicsCount");

function renderTopicList(){
  topicListEl.innerHTML = "";
  topics.forEach((t, index) => {
    const li = document.createElement("li");
    li.className = "topic-item";
    li.dataset.id = t.id;

    const left = document.createElement("div");
    const title = document.createElement("div");
    title.className = "topic-title";
    title.textContent = (index+1) + ". " + t.title;

    const meta = document.createElement("div");
    meta.className = "topic-meta";
    meta.textContent = t.module;

    left.appendChild(title);
    left.appendChild(meta);

    const chip = document.createElement("div");
    chip.className = "topic-chip";
    chip.textContent = "Excel 7";

    li.appendChild(left);
    li.appendChild(chip);

    li.addEventListener("click", () => openTopic(t.id));

    topicListEl.appendChild(li);
  });

  topicsCountEl.textContent = topics.length + " topics";
}

/* ------------- OPEN TOPIC ------------- */
const topicTitleEl = document.getElementById("topicTitle");
const topicTaglineEl = document.getElementById("topicTagline");
const explanationEl = document.getElementById("explanation");
const rulesRuEl = document.getElementById("rulesRu");
const examplesEl = document.getElementById("examples");
const tasksEl = document.getElementById("tasks");

function openTopic(id){
  const topic = topics.find(t => t.id === id);
  if(!topic) return;

  document.querySelectorAll(".topic-item").forEach(item => {
    if(Number(item.dataset.id) === id){
      item.classList.add("active");
    } else {
      item.classList.remove("active");
    }
  });

  topicTitleEl.textContent = topic.title;
  topicTaglineEl.textContent = topic.module + " ¬∑ " + topic.focus;

  explanationEl.innerHTML = topic.explanation;

  rulesRuEl.style.display = "block";
  rulesRuEl.innerHTML = topic.ruleRu;

  examplesEl.style.display = "block";
  examplesEl.innerHTML = "";
  const exTitle = document.createElement("div");
  exTitle.className = "examples-title";
  exTitle.textContent = "Examples:";
  const ul = document.createElement("ul");
  topic.examples.forEach(ex => {
    const li = document.createElement("li");
    li.textContent = ex;
    ul.appendChild(li);
  });
  examplesEl.appendChild(exTitle);
  examplesEl.appendChild(ul);

  tasksEl.style.display = "block";
  tasksEl.innerHTML = "";
  const h3 = document.createElement("h3");
  h3.innerHTML = 'Exercises <span>Click ‚ÄúShow answer‚Äù to check</span>';
  tasksEl.appendChild(h3);

  topic.tasks.forEach((task, i) => {
    const div = document.createElement("div");
    div.className = "task-item";

    const q = document.createElement("div");
    q.className = "task-q";
    q.textContent = (i+1) + ") " + task.question;

    const controls = document.createElement("div");
    controls.className = "task-controls";

    const showBtn = document.createElement("button");
    showBtn.className = "btn btn-outline";
    showBtn.textContent = "Show answer";

    const answerDiv = document.createElement("div");
    answerDiv.className = "task-answer";
    answerDiv.textContent = "Answer: " + task.answer;

    showBtn.addEventListener("click", () => {
      const visible = answerDiv.classList.toggle("visible");
      showBtn.textContent = visible ? "Hide answer" : "Show answer";
    });

    controls.appendChild(showBtn);

    div.appendChild(q);
    div.appendChild(controls);
    div.appendChild(answerDiv);
    tasksEl.appendChild(div);
  });
}

/* ------------- AI BAYAN CHAT ------------- */
const AI_WORKER_URL = "https://shiny-tree-f78c.aiko030500.workers.dev/";
const chatBox = document.getElementById("chatBox");
const aiQuestion = document.getElementById("aiQuestion");
const askBtn = document.getElementById("askBtn");
const aiStatus = document.getElementById("aiStatus");

function addChatMessage(role, text){
  const div = document.createElement("div");
  div.className = "chat-msg " + role;
  div.textContent = text;
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

async function sendToAiBayan(){
  const question = aiQuestion.value.trim();
  if(!question){
    aiStatus.textContent = "Write a question first.";
    return;
  }

  const currentTopic = topicTitleEl.textContent || "";

  addChatMessage("user", question);
  aiQuestion.value = "";
  aiStatus.textContent = "AI Bayan is thinking...";

  try{
    const payload = {
      question,
      meta:{
        app:"AI Bayan ‚Äì Excel 7 Grammar",
        topic: currentTopic,
        student: currentStudentName || null
      }
    };

    const response = await fetch(AI_WORKER_URL,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify(payload)
    });

    if(!response.ok){
      throw new Error("HTTP error " + response.status);
    }

    const data = await response.json().catch(()=>null);
    const answer = data && (data.answer || data.result || data.message)
      ? (data.answer || data.result || data.message)
      : "AI Bayan: I received your question. Please check your worker settings for full answer format.";

    addChatMessage("ai", answer);
    aiStatus.textContent = "";
  }catch(err){
    console.error(err);
    aiStatus.textContent = "Error: cannot reach AI Bayan worker.";
    addChatMessage("system","‚ö†Ô∏è AI Bayan worker is not available now. Check the Cloudflare Worker URL or internet connection.");
  }
}

if(askBtn){
  askBtn.addEventListener("click", sendToAiBayan);
}

if(aiQuestion){
  aiQuestion.addEventListener("keydown", (e) => {
    if(e.key === "Enter" && (e.ctrlKey || e.shiftKey)){
      return; // new line
    }
    if(e.key === "Enter"){
      e.preventDefault();
      sendToAiBayan();
    }
  });
}

/* ------------- INIT ------------- */
renderTopicList();
if(topics.length > 0){
  openTopic(topics[0].id);
}
</script>
</body>
</html>
